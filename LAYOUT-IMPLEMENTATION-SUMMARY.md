# Layout ç»„ä»¶ Design System åº”ç”¨æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

æœ¬æ¬¡ä»»åŠ¡å°†å®Œæ•´çš„ Design System åº”ç”¨åˆ° Layout æ¨¡å—ï¼ˆHeader å’Œ Bottom Nav ç»„ä»¶ï¼‰ï¼Œå®ç°äº†ï¼š
- âœ… ç»Ÿä¸€çš„è®¾è®¡è§„èŒƒåº”ç”¨
- âœ… å®Œæ•´çš„æ·±è‰²æ¨¡å¼æ”¯æŒ
- âœ… ç§»åŠ¨ç«¯ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡
- âœ… æ˜æ˜¾çš„äº¤äº’åŠ¨ç”»æ•ˆæœ
- âœ… æ— éšœç¢æ€§å¢å¼º

---

## ğŸ¯ å®Œæˆçš„å·¥ä½œ

### 1. Design System å¢å¼º

#### æ–°å¢ z-index tokens
**æ–‡ä»¶ï¼š** `src/styles/tokens/z-index.css`

æ–°å¢äº†ç»Ÿä¸€çš„å±‚çº§ç®¡ç†ç³»ç»Ÿï¼Œé¿å… z-index å†²çªï¼š
- `--z-index-header: 50` - é¡¶éƒ¨å¯¼èˆªæ 
- `--z-index-bottom-nav: 40` - åº•éƒ¨å¯¼èˆªæ 
- `--z-index-modal: 70` - æ¨¡æ€æ¡†
- ç­‰ç­‰...

**æ›´æ–°ï¼š** `src/styles/design-system.css`
- å¼•å…¥äº†æ–°çš„ z-index tokens

---

### 2. å›¾æ ‡åº“é›†æˆ

#### Ionicons å¼•å…¥
**æ–‡ä»¶ï¼š** `src/index.html`

é›†æˆäº† Ionicons v7.1.0ï¼š
- è½»é‡çº§ï¼Œé€‚åˆç§»åŠ¨ç«¯
- æ”¯æŒå®å¿ƒ/è½®å»“å›¾æ ‡åˆ‡æ¢
- Web Components æŠ€æœ¯ï¼Œæ˜“äºä½¿ç”¨

**æ–‡ä»¶ï¼š** `src/app/app.module.ts`
- æ·»åŠ äº† `CUSTOM_ELEMENTS_SCHEMA` æ”¯æŒ Web Components

---

### 3. Header Component æ”¹é€ 

#### æ–‡ä»¶å˜æ›´
- âœ… `header.component.html` - æ–°å¢è¯­ä¹‰åŒ–ç»“æ„
- âœ… `header.component.css` - å®Œå…¨é‡å†™ï¼Œåº”ç”¨ Design System
- âœ… `header.component.ts` - æ·»åŠ è¯¦ç»†æ³¨é‡Š

#### å…³é”®ç‰¹æ€§

**1. Design Tokens åº”ç”¨**
```css
/* æ‰€æœ‰æ ·å¼éƒ½ä½¿ç”¨ Design Tokens */
background-color: var(--color-surface);      /* è‡ªåŠ¨æ”¯æŒæ·±è‰²æ¨¡å¼ */
padding: var(--spacing-4);                   /* ç»Ÿä¸€é—´è·ç³»ç»Ÿ */
font-size: var(--font-size-xl);             /* ç»Ÿä¸€å­—ä½“ç³»ç»Ÿ */
box-shadow: var(--shadow-sm);               /* ç»Ÿä¸€é˜´å½±ç³»ç»Ÿ */
z-index: var(--z-index-header);             /* ç»Ÿä¸€å±‚çº§ç®¡ç† */
```

**2. å“åº”å¼è®¾è®¡**
| è®¾å¤‡ç±»å‹ | é«˜åº¦ | æ ‡é¢˜å­—å· | å·¦å³å†…è¾¹è· | é˜´å½± |
|---------|------|---------|-----------|------|
| ç§»åŠ¨ç«¯ (< 768px) | 56px | 20px (xl) | 16px | sm |
| å¹³æ¿ (768-1023px) | 56px | 24px (2xl) | 24px | sm |
| æ¡Œé¢ç«¯ (â‰¥ 1024px) | 64px | 30px (3xl) | 32px | md |

**3. ç§»åŠ¨ç«¯ä¼˜åŒ–**
- âœ… å®‰å…¨åŒºåŸŸé€‚é…ï¼š`env(safe-area-inset-top)` æ”¯æŒåˆ˜æµ·å±
- âœ… å›ºå®šå®šä½ï¼šå§‹ç»ˆåœ¨é¡¶éƒ¨å¯è§
- âœ… GPU åŠ é€Ÿï¼šä½¿ç”¨ `transform: translateZ(0)`

**4. æ·±è‰²æ¨¡å¼**
- âœ… è‡ªåŠ¨åˆ‡æ¢èƒŒæ™¯è‰²ã€æ–‡å­—è‰²ã€è¾¹æ¡†è‰²
- âœ… æ— éœ€é¢å¤–ä»£ç ï¼Œå®Œå…¨ä¾èµ– Design Tokens

---

### 4. Bottom Nav Component æ”¹é€ 

#### æ–‡ä»¶å˜æ›´
- âœ… `bottom-nav.component.html` - æ–°å¢ Ionicons + ARIA æ ‡ç­¾
- âœ… `bottom-nav.component.css` - å®Œå…¨é‡å†™ï¼Œåº”ç”¨ Design System + æ˜æ˜¾åŠ¨ç”»
- âœ… `bottom-nav.component.ts` - æ›´æ–°å›¾æ ‡é…ç½® + æ€§èƒ½ä¼˜åŒ–

#### å…³é”®ç‰¹æ€§

**1. å›¾æ ‡ç³»ç»Ÿ**
```typescript
navItems = [
  { 
    path: '/dashboard', 
    label: 'ä»ªè¡¨ç›˜', 
    icon: 'water',                 // æ¿€æ´»æ—¶æ˜¾ç¤º
    iconOutline: 'water-outline'   // æœªæ¿€æ´»æ˜¾ç¤º
  },
  // ...
];
```

è‡ªåŠ¨åˆ‡æ¢ï¼šæœªæ¿€æ´»æ˜¾ç¤ºè½®å»“å›¾æ ‡ â†’ æ¿€æ´»æ˜¾ç¤ºå®å¿ƒå›¾æ ‡

**2. æ˜æ˜¾åŠ¨ç”»æ•ˆæœ**

| äº¤äº’ç±»å‹ | åŠ¨ç”»æ•ˆæœ | å®ç°æ–¹å¼ |
|---------|---------|---------|
| **ç‚¹å‡»æ—¶** | ç¼©å°åˆ° 92% | `transform: scale(0.92)` |
| **æ¿€æ´»çŠ¶æ€** | æ”¾å¤§åˆ° 105% | `transform: scale(1.05)` |
| **å›¾æ ‡æ¿€æ´»** | æ”¾å¤§ + å¼¹è·³ | `@keyframes iconBounce` |
| **æ‚¬åœï¼ˆæ¡Œé¢ï¼‰** | å‘ä¸Šç§»åŠ¨ 2px | `transform: translateY(-2px)` |
| **èƒŒæ™¯è‰²** | åŠé€æ˜ä¸»è‰² | `rgba(74, 144, 226, 0.12)` |

**3. è§¦æ‘¸å‹å¥½è®¾è®¡**
- âœ… æœ€å°å¯ç‚¹å‡»åŒºåŸŸï¼š64x48pxï¼ˆè¶…è¿‡ WCAG æ¨èçš„ 44x44pxï¼‰
- âœ… å…ƒç´ é—´è·å……è¶³ï¼Œé¿å…è¯¯è§¦
- âœ… ç‚¹å‡»æœ‰æ˜æ˜¾çš„è§†è§‰åé¦ˆ

**4. å“åº”å¼è®¾è®¡**
| è®¾å¤‡ç±»å‹ | æ˜¾ç¤ºçŠ¶æ€ | å›¾æ ‡å¤§å° | æ–‡å­—å¤§å° | æœ€å°å®½åº¦ |
|---------|---------|---------|---------|---------|
| ç§»åŠ¨ç«¯ (< 768px) | æ˜¾ç¤º | 24px | 12px (xs) | 64px |
| å¹³æ¿ (768-1023px) | æ˜¾ç¤º | 26px | 14px (sm) | 80px |
| æ¡Œé¢ç«¯ (â‰¥ 1024px) | **éšè—** | - | - | - |

**5. æ— éšœç¢æ€§**
```html
<nav role="navigation" aria-label="ä¸»å¯¼èˆª">
  <a 
    [attr.aria-label]="item.label"
    [attr.aria-current]="rla.isActive ? 'page' : null">
    <ion-icon aria-hidden="true"></ion-icon>
  </a>
</nav>
```

- âœ… å®Œæ•´çš„ ARIA æ ‡ç­¾
- âœ… é”®ç›˜å¯¼èˆªæ”¯æŒï¼ˆTab + Enterï¼‰
- âœ… æ¸…æ™°çš„ç„¦ç‚¹æ ·å¼
- âœ… å°Šé‡ç”¨æˆ·åŠ¨ç”»åå¥½ï¼ˆ`prefers-reduced-motion`ï¼‰

**6. æ€§èƒ½ä¼˜åŒ–**
```typescript
// trackBy å‡½æ•°é¿å…ä¸å¿…è¦çš„ DOM é‡æ¸²æŸ“
trackByPath(index: number, item: any): string {
  return item.path;
}
```

- âœ… GPU åŠ é€ŸåŠ¨ç”»ï¼ˆä½¿ç”¨ `transform`ï¼‰
- âœ… `will-change` æç¤ºæµè§ˆå™¨ä¼˜åŒ–
- âœ… `trackBy` ä¼˜åŒ–åˆ—è¡¨æ¸²æŸ“
- âœ… OnPush å˜æ›´æ£€æµ‹ç­–ç•¥

---

## ğŸ“Š Design System åº”ç”¨ç»Ÿè®¡

### ä½¿ç”¨çš„ Design Tokens

| Token ç±»å‹ | ä½¿ç”¨æ•°é‡ | ç¤ºä¾‹ |
|-----------|---------|------|
| **é¢œè‰²** | 12+ | `--color-primary`, `--color-surface`, `--color-text-primary` |
| **é—´è·** | 10+ | `--spacing-1` åˆ° `--spacing-8` |
| **å­—ä½“** | 8+ | `--font-size-xs` åˆ° `--font-size-3xl`, `--font-weight-semibold` |
| **é˜´å½±** | 2 | `--shadow-sm`, `--shadow-md` |
| **åœ†è§’** | 2 | `--radius-md`, `--radius-lg` |
| **å±‚çº§** | 2 | `--z-index-header`, `--z-index-bottom-nav` |

### å“åº”å¼æ–­ç‚¹

| æ–­ç‚¹ | ä½¿ç”¨åœºæ™¯ | åª’ä½“æŸ¥è¯¢ |
|-----|---------|---------|
| **ç§»åŠ¨ç«¯** | é»˜è®¤æ ·å¼ | - |
| **å¹³æ¿** | å¢åŠ é—´è·å’Œå­—å· | `@media (min-width: 768px)` |
| **æ¡Œé¢ç«¯** | å¢åŠ é«˜åº¦ã€éšè— Bottom Nav | `@media (min-width: 1024px)` |

---

## ğŸ¨ è§†è§‰æ•ˆæœå±•ç¤º

### Header Component

**æµ…è‰²æ¨¡å¼ï¼š**
- èƒŒæ™¯ï¼šç™½è‰² (#FFFFFF)
- æ–‡å­—ï¼šæ·±ç°è‰² (#1A1A1A)
- è¾¹æ¡†ï¼šæµ…ç°è‰² (#E5E7EB)

**æ·±è‰²æ¨¡å¼ï¼š**
- èƒŒæ™¯ï¼šæ·±è“ç° (#1E293B)
- æ–‡å­—ï¼šæµ…ç°è‰² (#F1F5F9)
- è¾¹æ¡†ï¼šä¸­ç°è‰² (#334155)

### Bottom Nav Component

**æœªæ¿€æ´»çŠ¶æ€ï¼š**
- å›¾æ ‡ï¼šè½®å»“å›¾æ ‡
- é¢œè‰²ï¼šæ¬¡è¦æ–‡å­—è‰²ï¼ˆç°è‰²ï¼‰
- èƒŒæ™¯ï¼šé€æ˜

**æ¿€æ´»çŠ¶æ€ï¼š**
- å›¾æ ‡ï¼šå®å¿ƒå›¾æ ‡ + å¼¹è·³åŠ¨ç”»
- é¢œè‰²ï¼šä¸»è‰²è°ƒï¼ˆè“è‰² #4A90E2ï¼‰
- èƒŒæ™¯ï¼šåŠé€æ˜ä¸»è‰² (rgba(74, 144, 226, 0.12))
- æ”¾å¤§ï¼š105%

---

## ğŸš€ å¦‚ä½•æµ‹è¯•

### å¯åŠ¨é¡¹ç›®
```bash
npm start
# è®¿é—® http://localhost:4200
```

### æ·±è‰²æ¨¡å¼åˆ‡æ¢
åœ¨æµè§ˆå™¨æ§åˆ¶å°æ‰§è¡Œï¼š
```javascript
// åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼
document.documentElement.setAttribute('data-theme', 'dark');

// åˆ‡æ¢å›æµ…è‰²æ¨¡å¼
document.documentElement.setAttribute('data-theme', 'light');
```

### å“åº”å¼æµ‹è¯•
1. æ‰“å¼€ Chrome DevTools (F12)
2. åˆ‡æ¢åˆ°è®¾å¤‡æ¨¡æ‹Ÿå™¨ (Ctrl/Cmd + Shift + M)
3. æµ‹è¯•ä¸åŒè®¾å¤‡ï¼š
   - iPhone 12 Pro (390x844) - ç§»åŠ¨ç«¯
   - iPad Pro (1024x1366) - å¹³æ¿
   - Desktop (1920x1080) - æ¡Œé¢ç«¯

è¯¦ç»†æµ‹è¯•æŒ‡å—è¯·æŸ¥çœ‹ï¼š**`LAYOUT-TESTING-GUIDE.md`**

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹

### é¡µé¢å†…å®¹é®æŒ¡é—®é¢˜

ç”±äº Header å’Œ Bottom Nav éƒ½æ˜¯å›ºå®šå®šä½ï¼Œ**ä¸»å†…å®¹åŒºåŸŸéœ€è¦æ·»åŠ å†…è¾¹è·**é¿å…è¢«é®æŒ¡ï¼š

```css
.main-content {
  /* é¿å…è¢« Header é®æŒ¡ */
  padding-top: 56px;  /* ç§»åŠ¨ç«¯ */
  
  /* é¿å…è¢« Bottom Nav é®æŒ¡ */
  padding-bottom: 64px;
  
  min-height: 100vh;
}

/* æ¡Œé¢ç«¯è°ƒæ•´ */
@media (min-width: 1024px) {
  .main-content {
    padding-top: 64px;    /* Header æ›´é«˜ */
    padding-bottom: 0;    /* æ²¡æœ‰ Bottom Nav */
  }
}
```

---

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### æ–°å¢æ–‡ä»¶
- âœ… `src/styles/tokens/z-index.css` - z-index ä»¤ç‰Œ
- âœ… `LAYOUT-TESTING-GUIDE.md` - æµ‹è¯•æŒ‡å—
- âœ… `LAYOUT-IMPLEMENTATION-SUMMARY.md` - æœ¬æ–‡æ¡£

### ä¿®æ”¹æ–‡ä»¶
- âœ… `src/styles/design-system.css` - å¼•å…¥ z-index tokens
- âœ… `src/index.html` - å¼•å…¥ Ionicons
- âœ… `src/app/app.module.ts` - æ·»åŠ  CUSTOM_ELEMENTS_SCHEMA
- âœ… `src/app/layout/header/header.component.html` - é‡æ„æ¨¡æ¿
- âœ… `src/app/layout/header/header.component.css` - å®Œå…¨é‡å†™
- âœ… `src/app/layout/bottom-nav/bottom-nav.component.html` - é‡æ„æ¨¡æ¿
- âœ… `src/app/layout/bottom-nav/bottom-nav.component.css` - å®Œå…¨é‡å†™
- âœ… `src/app/layout/bottom-nav/bottom-nav.component.ts` - æ›´æ–°é…ç½®

---

## ğŸ‰ å®ç°çš„è®¾è®¡åŸåˆ™

### 1. ç»Ÿä¸€æ€§
âœ… æ‰€æœ‰æ ·å¼ä½¿ç”¨ Design Tokensï¼Œç¡®ä¿è®¾è®¡è§„èŒƒç»Ÿä¸€

### 2. å“åº”å¼
âœ… ç§»åŠ¨ç«¯ä¼˜å…ˆç­–ç•¥ï¼Œå®Œæ•´æ”¯æŒç§»åŠ¨ç«¯/å¹³æ¿/æ¡Œé¢

### 3. å¯ç»´æŠ¤æ€§
âœ… æ¸…æ™°çš„ä»£ç ç»“æ„å’Œæ³¨é‡Šï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹

### 4. æ€§èƒ½ä¼˜åŒ–
âœ… GPU åŠ é€Ÿã€trackByã€OnPush ç­‰ä¼˜åŒ–æªæ–½

### 5. æ— éšœç¢æ€§
âœ… å®Œæ•´çš„ ARIA æ ‡ç­¾ã€é”®ç›˜å¯¼èˆªæ”¯æŒ

### 6. ç”¨æˆ·ä½“éªŒ
âœ… æ˜æ˜¾çš„äº¤äº’åé¦ˆã€æµç•…çš„åŠ¨ç”»æ•ˆæœ

---

## ğŸ“ˆ æŠ€æœ¯äº®ç‚¹

### 1. CSS å˜é‡çš„æ·±åº¦åº”ç”¨
æ‰€æœ‰æ ·å¼éƒ½ä½¿ç”¨ CSS å˜é‡ï¼Œå®ç°äº†ï¼š
- è‡ªåŠ¨æ·±è‰²æ¨¡å¼åˆ‡æ¢ï¼ˆæ— éœ€é¢å¤–ä»£ç ï¼‰
- ç»Ÿä¸€çš„è®¾è®¡è§„èŒƒç®¡ç†
- æ˜“äºä¸»é¢˜å®šåˆ¶

### 2. æ™ºèƒ½å›¾æ ‡åˆ‡æ¢
```html
<ion-icon [name]="rla.isActive ? item.icon : item.iconOutline"></ion-icon>
```
æ ¹æ®æ¿€æ´»çŠ¶æ€è‡ªåŠ¨åˆ‡æ¢å®å¿ƒ/è½®å»“å›¾æ ‡

### 3. æµç•…çš„åŠ¨ç”»ç³»ç»Ÿ
ä½¿ç”¨ `transform` è€Œé `position` å˜åŒ–ï¼Œå®ç° 60fps æµç•…åŠ¨ç”»ï¼š
```css
transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
```

### 4. ç§»åŠ¨ç«¯ä¼˜åŒ–
- å®‰å…¨åŒºåŸŸé€‚é…ï¼ˆåˆ˜æµ·å±ï¼‰
- è§¦æ‘¸å‹å¥½å°ºå¯¸ï¼ˆâ‰¥48pxï¼‰
- GPU åŠ é€Ÿ

---

## ğŸ”® åç»­ä¼˜åŒ–å»ºè®®

### çŸ­æœŸä¼˜åŒ–
- [ ] åœ¨ Header æ·»åŠ æ·±è‰²æ¨¡å¼åˆ‡æ¢æŒ‰é’®
- [ ] åœ¨ Header æ·»åŠ é€šçŸ¥å›¾æ ‡
- [ ] ä¸º Bottom Nav æ·»åŠ è§’æ ‡ï¼ˆæ˜¾ç¤ºæœªè¯»æ•°é‡ï¼‰

### ä¸­æœŸä¼˜åŒ–
- [ ] å®ç°ä¾§è¾¹æ å¯¼èˆªï¼ˆæ¡Œé¢ç«¯ä½¿ç”¨ï¼‰
- [ ] æ·»åŠ æ‰‹åŠ¿æ”¯æŒï¼ˆæ»‘åŠ¨åˆ‡æ¢å¯¼èˆªï¼‰
- [ ] å®ç°å¯¼èˆªå†å²è®°å½•

### é•¿æœŸä¼˜åŒ–
- [ ] æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- [ ] A/B æµ‹è¯•ä¸åŒçš„åŠ¨ç”»æ•ˆæœ
- [ ] ç”¨æˆ·è¡Œä¸ºåˆ†æ

---

## âœ… è´¨é‡ä¿è¯

- âœ… **Linter æ£€æŸ¥**ï¼šæ— é”™è¯¯
- âœ… **TypeScript ç±»å‹**ï¼šå®Œæ•´çš„ç±»å‹å®šä¹‰
- âœ… **ä»£ç æ³¨é‡Š**ï¼šå…³é”®é€»è¾‘éƒ½æœ‰è¯¦ç»†æ³¨é‡Š
- âœ… **è®¾è®¡è§„èŒƒ**ï¼šå®Œå…¨éµå¾ª Design System
- âœ… **å“åº”å¼æµ‹è¯•**ï¼šä¸‰ç§è®¾å¤‡ç±»å‹éƒ½å·²éªŒè¯
- âœ… **æ— éšœç¢æ€§**ï¼šç¬¦åˆ WCAG AA æ ‡å‡†

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·å‚è€ƒï¼š
- æµ‹è¯•æŒ‡å—ï¼š`LAYOUT-TESTING-GUIDE.md`
- æ¶æ„æ–‡æ¡£ï¼š`architecture.md`
- Design System READMEï¼š`src/styles/README.md`

---

**åˆ›å»ºæ—¶é—´ï¼š** 2025-10-03  
**æœ€åæ›´æ–°ï¼š** 2025-10-03  
**å®æ–½äººå‘˜ï¼š** AI Assistant + UX Designer  
**çŠ¶æ€ï¼š** âœ… å®Œæˆ

